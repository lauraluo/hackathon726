var app={};app.module={version:"0.1",namespace:function(n){var a,t=n.split("."),e=app;for("app"===t[0]&&(t=t.slice(1)),a=0;a<t.length;a+=1)"undefined"==typeof e[t[a]]&&(e[t[a]]={}),e=e[t[a]];return e},inherit:function(n,a){n.prototype=new a},pluginWidget:function(n){var n=$(n),a=n.find("> .panel"),t=500,e=n.find(".content"),i=n.find(".closeBtn");e.css({height:$(window).height()-48,overflow:"hidden"}),e.niceScroll(),i.click(function(){a.hide(),n.addClass("closeStatus")}),n.find(".panelLogoBtn").on("click",function(){n.hasClass("closeStatus")&&(n.removeClass("closeStatus").delay(300),a.delay(300).show())}),n.niceScroll(),$(window).resize(function(){e.getNiceScroll().resize(),e.css({height:$(window).height()-48,overflow:"hidden"})}),n.find(".content").delay(t).addClass("activeSence");var s=[{val:[40],avg:15,domainX:[10,15,100],lv:3.2},{val:[.5],avg:.2,domainX:[0,.4,.6],lv:9.1},{val:[40],avg:15,domainX:[10,15,100],lv:6.2},{val:[.5],avg:.2,domainX:[0,.4,.6],lv:9.1},{val:[40],avg:15,domainX:[10,15,100],lv:3.2},{val:[.5],avg:.2,domainX:[0,.4,.6],lv:9.1}],o={w:360,h:43,barH:31,paddingTop:10,paddingLeft:20},r=n.find(".barfield");r.each(function(n,a){for(var t=s[n].lv,e=$(a),i="",r=s[n].domainX,l=s[n].val,c=s[n].avg,d=[],h=e.data("name"),u=r.length;u>0;u--)d.push(Math.round(o.w/u));i=t>=8?"ok":t>=6?"safe":"bad";var f=['   <ul class="chartInfo tipinfo">','       <li class="barSquare"><span class="block"></span>'+h+'<span class="number">555</span></li>','       <li class="avg"><span class="block"></span>平均<span class="number">'+c+"</span></li>",'       <li class="range"><span class="block"></span>級距<span class="number">'+r[0]+"-"+r[r.length-1]+"</span></li>",'       <li class="order">排序<span class="number">11111</span></li>',"   </ul>"].join("");e.addClass(i),e.find(".barChart").tooltipster({animation:"fade",delay:300,theme:"tooltipster-default customtip "+i,touchDevices:!1,trigger:"hover",content:"testword",content:f,minWidth:150,contentAsHTML:!0});var p=d3.select(a).selectAll(".barChart").append("svg").attr("class","barSence").attr("width",o.w).attr("height",o.h),d=d3.scale.linear().domain(r).range(d).nice(),v=(p.append("rect").attr("class","warp").attr("x",function(){return 0}).attr("y",function(){return 10}).attr("width",function(){return o.w}).attr("height",function(){return o.barH}),p.selectAll(".barSence").data(l).enter().append("rect").attr("class","barObj").attr("x",function(){return 0}).attr("y",function(){return 10}).attr("width",function(){return 0}).attr("height",function(){return o.barH}));v.transition().attr("width",function(n){return d(n)}),e.find(".avg").animate({left:d(c)-8},500)})},fanList:function(n){var n=$(n),a=n.find(".fanItem"),t=$("#areaID_widgetWindow"),e=t.find("> .mask");n.css({height:$("body").height()}),t.css({height:$("body").height()}),e.css({height:$("body").height(),width:$("body").width()}),n.niceScroll(),$(window).resize(function(){n.css({height:$("body").height()}),n.getNiceScroll().resize(),t.css({height:$("body").height()}),e.css({height:$("body").height(),width:$("body").width()})}),a.each(function(n,a){var t=$(a),e='<div class="loadingBar"></div>',i=$(e),s=0,o=setInterval(function(){l()},500),r=(t.find(".waveLoad"),t.find(".arrowBlock"));t.append(i);var l=function(){return s+=10,s>=100?(clearInterval(o),t.find(".waveLoad").remove(),r.show(),r.css({transition:"transform 0.3s ease-in-out"}),r.css({transform:"scale(1.0)"}),r.addClass("active"),t.removeClass("disabled"),i.fadeOut().remove(),void 0):(i.css({transition:"width 0.3s ease-in-out"}),i.css({width:s+"%"}),void 0)}}),a.on("click",function(){e.show(),t.find(".winWarp").animate({width:420})})},indexhero:function(n){var n=$(n);n.css({height:$("body").height()}),n.niceScroll(),$(window).resize(function(){n.css({height:$("body").height()}),n.getNiceScroll().resize()})}},function(){var n=function(n,a){var t=document.getElementById(n);t&&a(t)};n("pluginWidget",app.module.pluginWidget),n("areaID_fanList",app.module.fanList),n("areaID_hero",app.module.indexhero)}();